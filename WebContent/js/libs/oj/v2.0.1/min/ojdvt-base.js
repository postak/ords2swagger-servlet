/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojvalidation","ojs/internal-deps/dvt/DvtToolkit","promise"],function(b,f,a,d,c){function e(a,b){this.Fia=b;this.zka=a;this.$ba="/"}b.Og=function(a){this.Init(a)};o_("AttributeGroupHandler",b.Og,b);b.b.ga(b.Og,b.b,"oj.AttributeGroupHandler");b.Og.prototype.Init=function(a){b.Og.q.Init.call(this);this.kx=a?a:{};this.bw={};this.ID=0;this.Fz=this.mr();for(var d in this.kx)a=this.Fz.indexOf(this.kx[d]),-1!==a&&this.Fz.splice(a,1)};b.Og.prototype.mr=
function(){return[]};b.b.g("AttributeGroupHandler.prototype.getValueRamp",{mr:b.Og.prototype.mr});b.Og.prototype.Jc=function(a){if(this.kx[a])return this.kx[a];this.bw[a]||(this.bw[a]=this.Fz[this.ID],this.ID==this.Fz.length-1?this.ID=0:this.ID++);return this.bw[a]};b.b.g("AttributeGroupHandler.prototype.getValue",{Jc:b.Og.prototype.Jc});b.Og.prototype.M2=function(){var a=[],b;for(b in this.bw)a.push({category:b,value:this.bw[b]});return a};b.b.g("AttributeGroupHandler.prototype.getCategoryAssignments",
{M2:b.Og.prototype.M2});b.Og.prototype.E1=function(a,b){this.kx[a]=b};b.b.g("AttributeGroupHandler.prototype.addMatchRule",{E1:b.Og.prototype.E1});b.vv=function(a){this.Init(a)};o_("ShapeAttributeGroupHandler",b.vv,b);b.b.ga(b.vv,b.Og,"oj.ShapeAttributeGroupHandler");b.vv.cw="square circle diamond plus triangleDown triangleUp human".split(" ");b.vv.prototype.mr=function(){return b.vv.cw.slice()};e.prototype.ska=function(a,b,d,c){for(var e={};a&&-1<b.indexOf(d);){var g=b.substring(0,b.indexOf(d));
c&&void 0===a[g]&&(a[g]={});a=a[g];b=b.substring(b.indexOf(d)+1,b.length)}a&&(e.object=a,e.parameter=b);return e};e.prototype.I_=function(a){void 0===this.jx&&(a=this.ska(this.zka,this.Fia,this.$ba,a),this.jx=a.object,this.YK=a.parameter)};e.prototype.Jc=function(){this.I_(!1);return void 0===this.jx?void 0:this.jx[this.YK]};e.prototype.x5=function(a,b){this.I_(!0);if(b||!this.jx[this.YK])this.jx[this.YK]=a};var g={CSS_TEXT_PROPERTIES:function(a){var b={};a&&(a.hasClass("oj-gaugeMetricLabel")&&a.hasClass(a.parentNode,
"oj-ledGauge")?(b["font-size"]=!0,b.color=!0):a.hasClass(a,"oj-chartSliceLabel")?b.color=!0:a.hasClass("oj-treemap-node-header")&&(b["font-weight"]=!0));return g.iaa(a,b)},CSS_BACKGROUND_PROPERTIES:function(a){return g.$$(a)},CSS_URL:function(a){return g.Eia(a)},uR:"rgb(254, 0, 254)",g8:"Times",h8:"1px",wR:"1",vR:"normal",Z7:4,lD:{},Nna:function(a,b){return a.css(b)},Eia:function(a){return(a=a.css("background-image"))&&-1!==a.indexOf("url(")?a.slice(a.indexOf("url(")+4,a.length-1).replace(/"/g,""):
a},$$:function(a){var b={};a.css("border-top-color")&&(b["border-color"]=a.css("border-top-color"));a.css("border-width")&&a.css("border-style")&&"none"!=a.css("border-style")&&(b["border-width"]=a.css("border-width"));a.css("background-color")&&(b["background-color"]=a.css("background-color"));return b},iaa:function(a,b){var d={},c=a.css("font-family");c&&c!==g.g8&&(d["font-family"]=c.replace(/"/g,"'"));c=a.css("font-size");!c||-1<c.indexOf("px")&&parseFloat(c)<g.Z7||b["font-size"]||(d["font-size"]=
c);(c=a.css("font-weight"))&&c!==g.wR&&!b["font-weight"]&&(d["font-weight"]=c);(c=a.css("color"))&&c!==g.uR&&!b.color&&(d.color=c);(c=a.css("font-style"))&&c!==g.vR&&(d["font-style"]=c);return d},Lpa:function(a,b,d,c){var e=f(document.createElement("div"));e.attr("style","display:none;");a.append(e);a="";for(var p=0;p<d.length;p++)a=a+d[p]+" ";e.attr("class",a);f(document.body).append(e);d=f(document.createElement("div"));d.css("font-size",g.h8);d.css("color",g.uR);d.css("font-weight",g.wR);d.css("font-style",
g.vR);e.append(d);for(var r in c)a=c[r],a instanceof Array||(a=[a]),g.bja(d,b,r,a);e.remove()},bja:function(a,b,d,c){g.lD[d]||(g.lD[d]={});for(var n=null,p=0;p<c.length;p++){var r=c[p],s=r.property;if(s){var q=g.lD[d][s];"undefined"==typeof q&&(n||(n=f(document.createElement("div")),n.addClass(d),a.append(n)),q=g.tka(n,s),g.lD[d][s]=q);if(null!=q){var r=new e(b,r.path),t=g[s];if(null!=t){var x=r.Jc();if("CSS_URL"!==s){s="";if(null!=x){for(var w in q)-1===x.indexOf(w)&&(s+=w+":"+q[w]+";");s+=x}else for(w in q)s+=
w+":"+q[w]+";";q=s}}r.x5(q,null!=t)}}}},tka:function(a,b){var d=g[b],d=d?d(a):g.Nna(a,b);return null==d||"string"==typeof d&&""==d.replace(/^\s+/g,"")?null:d}};b.ya("oj.dvtBaseComponent",f.oj.baseComponent,{_ComponentCreate:function(){this._super();this.vx=this.BL=0;this.Ck=null;this.nL=f(document.createElement("div"));this.nL.attr("style","visibility:hidden;");this.element.append(this.nL);var a=this.element[0].parentElement;this.zf=a&&a.zI?a.zI:new c.Context(this.element[0],null,this.nL[0]);this.zf.setReadingDirection(this.dc());
this.zf.setTooltipAttachedCallback(b.Components.df);this.zf.setOverlayAttachedCallback(b.Components.df);this.zf.setTooltipStyleClass("oj-dvt-tooltip");this.zf.setDatatipStyleClass("oj-dvt-datatip");f(document.body).hasClass("oj-hicontrast")&&c.Agent.setHighContrast(!0);this.la=this.pf(this.zf,this.ck,this);this.zf.getStage().addChild(this.la);!1!==c.requireJS&&(this.ela(),this.KZ());this.vs();this.options._environment="jet";this.options._widgetConstructor=b.Components.Rf(this.element)},nf:function(){this._super();
this.element.attr("tabIndex",0);this.kg();"off"!=this.options.trackResize&&this.$G()},refresh:function(){this._super();this.zf.setReadingDirection(this.dc());this.KZ();this.kg()},getNodeBySubId:function(a){var b=this.la&&this.la.getAutomation?this.la.getAutomation():null;if(b)return a=this.ei(a),b.getDomElementForSubId(a)},getSubIdByNode:function(a){var b=this.la&&this.la.getAutomation?this.la.getAutomation():null;if(b)return(a=b.getSubIdForDomElement(a))?this.ig(a):null},ei:function(){return null},
ig:function(){return null},gA:function(){for(var a=this.Fe(),b=0;b<a.length;b++)this.element.addClass(a[b]);g.Lpa(this.element,this.options,this.Fe(),this.gi())},Fe:function(){return["oj-dvtbase"]},gi:function(){return{"oj-dvt-no-data-message":{path:"_statusMessageStyle",property:"CSS_TEXT_PROPERTIES"}}},ii:function(){return[]},ji:function(){var a=this.options.translations,a={"DvtUtilBundle.CLEAR_SELECTION":a.labelClearSelection,"DvtUtilBundle.COLON_SEP_LIST":a.labelAndValue,"DvtUtilBundle.INVALID_DATA":a.labelInvalidData,
"DvtUtilBundle.NO_DATA":a.labelNoData,"DvtUtilBundle.DATA_VISUALIZATION":a.labelDataVisualization,"DvtUtilBundle.STATE_SELECTED":a.stateSelected,"DvtUtilBundle.STATE_UNSELECTED":a.stateUnselected,"DvtUtilBundle.STATE_MAXIMIZED":a.stateMaximized,"DvtUtilBundle.STATE_MINIMIZED":a.stateMinimized,"DvtUtilBundle.STATE_EXPANDED":a.stateExpanded,"DvtUtilBundle.STATE_COLLAPSED":a.stateCollapsed,"DvtUtilBundle.STATE_ISOLATED":a.stateIsolated,"DvtUtilBundle.STATE_HIDDEN":a.stateHidden,"DvtUtilBundle.STATE_VISIBLE":a.stateVisible,
"DvtUtilBundle.SCALING_SUFFIX_THOUSAND":a.labelScalingSuffixThousand,"DvtUtilBundle.SCALING_SUFFIX_MILLION":a.labelScalingSuffixMillion,"DvtUtilBundle.SCALING_SUFFIX_BILLION":a.labelScalingSuffixBillion,"DvtUtilBundle.SCALING_SUFFIX_TRILLION":a.labelScalingSuffixTrillion,"DvtUtilBundle.SCALING_SUFFIX_QUADRILLION":a.labelScalingSuffixQuadrillion},d=b.Ja.Fy("abbreviated");a["DvtUtilBundle.MONTH_SHORT_JANUARY"]=d[0];a["DvtUtilBundle.MONTH_SHORT_FEBRUARY"]=d[1];a["DvtUtilBundle.MONTH_SHORT_MARCH"]=d[2];
a["DvtUtilBundle.MONTH_SHORT_APRIL"]=d[3];a["DvtUtilBundle.MONTH_SHORT_MAY"]=d[4];a["DvtUtilBundle.MONTH_SHORT_JUNE"]=d[5];a["DvtUtilBundle.MONTH_SHORT_JULY"]=d[6];a["DvtUtilBundle.MONTH_SHORT_AUGUST"]=d[7];a["DvtUtilBundle.MONTH_SHORT_SEPTEMBER"]=d[8];a["DvtUtilBundle.MONTH_SHORT_OCTOBER"]=d[9];a["DvtUtilBundle.MONTH_SHORT_NOVEMBER"]=d[10];a["DvtUtilBundle.MONTH_SHORT_DECEMBER"]=d[11];return a},KZ:function(){var a=this.ji();c.Bundle.addLocalizedStrings(a)},ela:function(){var a={};a.numberConverterFactory=
b.qa.T2("number");a.dateToIsoConverter=function(a){return a instanceof Date?b.qb.dateToLocalIso(a):a};a.isoToDateConverter=function(a){return"string"==typeof a?b.qb.isoToLocalDate(a):a};this.zf.setLocaleHelpers(a)},_destroy:function(){this.zf.hideTooltips();this.la.destroy&&this.la.destroy();this.xL();this.element.children().remove();this.element.removeAttr("role").removeAttr("tabIndex");for(var a=this.Fe(),b=0;b<a.length;b++)this.element.removeClass(a[b]);this._super()},_setOptions:function(a,b){this._superApply(arguments);
var d=this.options.trackResize;"off"==d&&this.Ci?this.xL():"off"==d||this.Ci||this.$G();if(!this.sT){var c=!1,e=this.ii(),g=["highlightedCategories","selection","dataCursorPosition"];f.each(a,function(a){if(0>e.indexOf(a)&&0>g.indexOf(a))return c=!0,!1});c?this.kg():(void 0!==a.highlightedCategories&&this.la.highlight(a.highlightedCategories),void 0!==a.selection&&this.la.select(a.selection),void 0!==a.dataCursorPosition&&this.la.positionDataCursor&&this.la.positionDataCursor(a.dataCursorPosition))}},
pf:function(){return null},ck:function(a){var b=a.type;"selection"===b?this.vd("selection",a.selection):"categoryHide"===b||"categoryShow"===b?this.vd("hiddenCategories",a.hiddenCategories):"categoryHighlight"===b?this.vd("highlightedCategories",a.categories):"optionChange"===b?this.vd(a.key,a.value,a.optionMetadata):"touchHoldRelease"===b&&this.options.contextMenu?this.tf(f.Event(a.nativeEvent),"touch"):"ready"===b&&0===this.vx&&(this.jL&&this.jL(!0),this.NZ=!0,this.iL=this.jL=null)},$G:function(){this.Ci||
(this.Ci=this.Ye.bind(this),b.v.Oh(this.element[0],this.Ci,250))},xL:function(){this.Ci&&(b.v.Pi(this.element[0],this.Ci),this.Ci=null)},Ye:function(){var a=this.element.width(),b=this.element.height();(null==this.KD||null==this.hC||5<=Math.abs(a-this.KD)+Math.abs(b-this.hC))&&this.kg(!0)},vs:function(){},kg:function(a){this.NZ=!1;this.zf.isReadyToRender()?(this.KD=this.Wz()?null:this.element.width(),this.hC=this.Wz()?null:this.element.height(),this.options._width=this.KD,this.options._height=this.hC,
this.options._locale=b.ba.Bg(),this.gA(),this.BL++,a?this.Ck||this.AL(null):0===this.rka().length&&this.AL(this.options),this.DL=!1):this.DL=!0},vl:function(){this._super();this.DL&&this.kg()},rn:function(){this._super();this.DL&&this.kg()},li:function(){this._super();this.zf.hideTooltips()},ul:function(){this._super();this.zf.hideTooltips()},vd:function(a,b,d){this.sT=!0;this.option(a,b,{_context:{Gc:!0,yr:d,Va:!0}});this.sT=!1},rf:function(a,b,d){"touch"!==d&&("keyboard"===d?this.tf(b,d,{position:{of:this.la.getKeyboardFocus()}}):
this._super(a,b,d))},Fv:function(a){return(a=b.Components.Rf(a)("instance"))?a.la:null},Vg:function(a){if(a){var b={},d;for(d in a)this.i$(a,d,b);Object.defineProperties(a,b)}},i$:function(a,b,d){var c=("selected"==b?"is":"get")+b.charAt(0).toUpperCase()+b.slice(1);d[c]={value:function(){return a[b]}}},Bp:function(a){for(var b="",d=0;d<a.length;d++)b+="["+a[d]+"]";return b},tl:function(a){for(var b=[],d=0;0<a.indexOf("[",d);){var c=a.indexOf("[",d)+1,d=a.indexOf("]",d);b.push(Number(a.substring(c,
d)));d+=1}return b},Wg:function(a){return Number(this.Qz(a))},Qz:function(a){var b=a.indexOf("[")+1,d=a.indexOf("]");return a.substring(b,d)},hi:function(){return{}},rka:function(){this.Ck=null;var a=this.hi(),b;for(b in a)for(var d=a[b],c=0;c<d.length;c++)if("root"===b){if(this.$p(this.options,d[c]))break}else{var e=this.options[b];if(e)for(var g=0;g<e.length&&!this.$p(e[g],d[c]);g++);}var f=[];this.vx=0;if(this.Ck){var s=this;for(b in a)d=a[b],d.forEach(function(a){var d;if("root"===b)(d=s.JW(s.Ck,
a))&&f.push(d);else{var c=s.Ck[b];if(c)for(var e=0;e<c.length;e++)(d=s.JW(c[e],a))&&f.push(d)}})}return f},$p:function(a,b){if(!this.Ck){var d=(new e(a,b)).Jc();d&&(d instanceof Function||d instanceof Promise)&&(this.Ck=c.JsonUtils.clone(this.options))}return null!==this.Ck},JW:function(a,b){var d=new e(a,b),c=d.Jc();c instanceof Function&&(c=Promise.resolve(c(this.rR(a))));if(c&&c instanceof Promise){this.vx++;var g=this.BL,f=this;c.then(function(a){f.w_(g,d,a)},function(){f.w_(g,d,[])});return c}return null},
w_:function(a,b,d){a===this.BL&&(this.vx--,b.x5(d,!0),0===this.vx&&(this.AL(this.Ck),this.Ck=null))},AL:function(a){var b=this.Wz()&&this.Ci;b&&this.xL();this.la.render(a,this.KD,this.hC);b&&this.$G()},rR:function(){return{}},Wz:function(){return!1},whenReady:function(){if(this.NZ)return Promise.resolve(!0);if(!this.iL){var a=this;this.iL=new Promise(function(b){a.jL=b})}return this.iL}},!0);b.Ne=function(a){this.cw=[];if(f(document.body).hasClass("oj-hicontrast"))this.cw=b.Ne.dR.slice();else{if(!b.Ne.mw){b.Ne.mw=
[];var d=f(document.createElement("div"));d.attr("style","display:none;");d.attr("id","attrGps");f(document.body).append(d);for(var c=0;c<b.Ne.pS.length;c++){var e=f(document.createElement("div"));e.addClass(b.Ne.pS[c]);d.append(e);(e=e.css("color"))&&b.Ne.mw.push(e)}d.remove()}this.cw=0<b.Ne.mw.length?b.Ne.mw.slice():b.Ne.dR.slice()}this.Init(a)};o_("ColorAttributeGroupHandler",b.Ne,b);b.b.ga(b.Ne,b.Og,"oj.ColorAttributeGroupHandler");b.Ne.dR="#267db3 #68c182 #fad55c #ed6647 #8561c8 #6ddbdb #ffb54d #e371b2 #47bdef #a2bf39 #a75dba #f7f37b".split(" ");
b.Ne.pS="oj-dvt-category1 oj-dvt-category2 oj-dvt-category3 oj-dvt-category4 oj-dvt-category5 oj-dvt-category6 oj-dvt-category7 oj-dvt-category8 oj-dvt-category9 oj-dvt-category10 oj-dvt-category11 oj-dvt-category12".split(" ");b.Ne.mw=null;b.Ne.prototype.mr=function(){return this.cw.slice()}});